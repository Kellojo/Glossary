/*!
 * UI development toolkit for HTML5 (OpenUI5)
 * (c) Copyright 2009-2018 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.define(['sap/base/events/KeyCodes','sap/ui/dom/focus','sap/ui/thirdparty/jquery'],function(K,f){"use strict";var F={};F.fastNavigationKey="sap-ui-fastnavgroup";F.handleF6GroupNavigation=function(e,s){function a(r){var G=jQuery(r).closest('[data-sap-ui-customfastnavgroup="true"]');return G[0];}function b(r){var G=a(r);if(G){return G;}var $=jQuery(r).closest('[data-'+F.fastNavigationKey+'="true"]');return $[0];}function c(r,S,N){var R=jQuery(r),A,T;if(N){A=jQuery.merge(R.find("*"),jQuery.merge(R.nextAll(),R.parents().nextAll()));T=A.find(':sapTabbable').addBack(':sapTabbable');}else{A=jQuery.merge(R.prevAll(),R.parents().prevAll());T=jQuery.merge(R.parents(':sapTabbable'),A.find(':sapTabbable').addBack(':sapTabbable'));}var T=jQuery.unique(T);return T.filter(function(){return g(S,this);});}function d(r,S){var o=window.document.getElementById("sap-ui-static");if(!o){return r;}var j=[];for(var i=0;i<S.length;i++){if(jQuery.contains(o,S[i])){j.push(S[i]);}}return r.filter(function(){if(j.length&&g(j,this)){return true;}return!jQuery.contains(o,this);});}function g(C,r){for(var i=0;i<C.length;i++){if(C[i]===r||jQuery.contains(C[i],r)){return true;}}return false;}function h($,T,o,j){var G,k;for(var i=T.length-1;i>=0;i--){G=b(T[i]);if(G!=o){if(j){o=G;j=false;}else{k=jQuery(T[i+1]);break;}}}if(!k&&!j){k=$;}return k;}function n(o,S,j){if(!S||S.length==0){S=[document];}if(!g(S,o)){return;}var k=b(o),A=d(jQuery(S).find(':sapTabbable').addBack(':sapTabbable'),S),$=A.first(),T=d(c(o,S,j),S),G,l;if(j){for(var i=0;i<T.length;i++){G=b(T[i]);if(G!=k){l=jQuery(T[i]);break;}}if(!l||!l.length){l=$;}}else{l=h($,T,k,true);if(!l||!l.length){if(A.length==1){l=jQuery(A[0]);}else if(A.length>1){k=b(A.eq(-1));G=b(A.eq(-2));if(k!=G){l=A.eq(-1);}else{l=h($,A,k,false);}}}}if(l&&l.length){var t=l[0],e=null,C=a(t);if(C&&C.id){var m=sap.ui.getCore().byId(C.id);if(m){e=jQuery.Event("BeforeFastNavigationFocus");e.target=t;e.source=o;e.forward=j;m._handleEvent(e);}}if(!e||!e.isDefaultPrevented()){f(t);}}}if(e.type!="keydown"||e.keyCode!=K.F6||e.isMarked("sapui5_handledF6GroupNavigation")||e.isMarked()||e.isDefaultPrevented()){return;}e.setMark("sapui5_handledF6GroupNavigation");e.setMarked();e.preventDefault();if(s&&s.skip){return;}var t=s&&s.target?s.target:document.activeElement,S=null;if(s&&s.scope){S=Array.isArray(s.scope)?s.scope:[s.scope];}n(t,S,!e.shiftKey);};jQuery(function(){jQuery(document).on("keydown",function(e){F.handleF6GroupNavigation(e,null);});});return F;});
