/*!
 * UI development toolkit for HTML5 (OpenUI5)
 * (c) Copyright 2009-2018 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.define(['jquery.sap.global','sap/ui/core/Element'],function(q,E){"use strict";var S={},s={},a=E.extend("sap.ui.core._StashedControl",{constructor:function(i,b){E.apply(this,arguments);b.stashed=true;q.sap.extend(this,b);this._stash(b.sParentId,b.sParentAggregationName);return this;},metadata:{specialSettings:{stashed:{type:'boolean',visibility:'hidden'},sParentId:{type:'string',visibility:'hidden'},sParentAggregationName:{type:'string',visibility:'hidden'},fnCreate:{type:'function',visibility:'hidden'}}}});a.prototype.setParent=function(){q.sap.log.error("Cannot set parent on a StashedControl",this.getId());};a.prototype.clone=function(){var c=E.prototype.clone.apply(this,arguments);s[c.getId()]=c;return c;};a.prototype.destroy=function(){delete s[this.getId()];E.prototype.destroy.apply(this,arguments);};m(a,true);S.mixInto=function(c,d){m(c,d);};function m(c,d){c.getMetadata().addSpecialSetting("stashed",{type:"boolean",defaultValue:!!d});c.prototype.setStashed=function(b){if(this.stashed===true&&!b){if(this.sParentId){var C=u(this,sap.ui.getCore().byId(this.sParentId));C.stashed=false;return;}}else if(b){q.sap.log.warning("Cannot re-stash a control",this.getId());}};c.prototype.getStashed=function(){return this.stashed;};var D=c.prototype.destroy;c.prototype.destroy=function(){delete s[this.getId()];D.apply(this,arguments);};c.prototype._stash=function(p,P){this.sParentId=p;this.sParentAggregationName=P;s[this.getId()]=this;};}function u(C,p){if(C instanceof a){var b,d,o,f=C.fnCreate,P=C.sParentAggregationName;C.destroy();d=sap.ui.require("sap/ui/core/Component");o=d&&d.getOwnerComponentFor(p);if(o){b=o.runAsOwner(f);}else{b=f();}b.forEach(function(c){p.getMetadata().getAggregation(P).add(p,c);});}delete s[C.getId()];return C;}function g(A,p){var b=[];for(var i in s){var I=A?s[i]:s[i].getId();if(!p||s[i].sParentId===p){b.push(I);}}return b;}S.getStashedControlIds=function(p){return g(false,p);};S.getStashedControls=function(p){return g(true,p);};S.createStashedControl=function(i,b){return new a(i,b);};return S;});
