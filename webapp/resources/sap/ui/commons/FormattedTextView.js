/*!
 * UI development toolkit for HTML5 (OpenUI5)
 * (c) Copyright 2009-2018 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.define(['jquery.sap.global','./library','sap/ui/core/Control',"./FormattedTextViewRenderer"],function(q,l,C,F){"use strict";var a=C.extend("sap.ui.commons.FormattedTextView",{metadata:{library:"sap.ui.commons",properties:{accessibleRole:{type:"sap.ui.core.AccessibleRole",group:"Accessibility",defaultValue:sap.ui.core.AccessibleRole.Document},htmlText:{type:"string",group:"Misc",defaultValue:""}},aggregations:{controls:{type:"sap.ui.core.Control",multiple:true,singularName:"control"}}}});a.prototype.init=function(){this._renderingRules={};this._renderingRules.ATTRIBS={'span::class':1,'div::class':1,'div::id':1,'span::id':1,'embed::data-index':1};this._renderingRules.ELEMENTS={'abbr':1,'acronym':1,'address':1,'blockquote':1,'br':1,'cite':1,'code':1,'dfn':1,'div':1,'em':1,'h1':1,'h2':1,'h3':1,'h4':1,'h5':1,'h6':1,'kbd':1,'p':1,'pre':1,'q':1,'samp':1,'strong':1,'span':1,'var':1,'dl':1,'dt':1,'dd':1,'ol':1,'ul':1,'li':1,'embed':1};};a.prototype.exit=function(){delete this._renderingRules;};a.prototype.hasControls=function(){var c=this.getAggregation("controls");return!!(c&&c.length>0);};var s=function(t,b){var c=/^[0-9]*$/;for(var i=0;i<b.length;i+=2){var A=t+"::"+b[i];if(this._renderingRules.ATTRIBS[A]){if(t==="embed"&&!(b[i+1].match(c))){return null;}}else{var w='<'+t+'> with attribute ['+b[i]+'="'+b[i+1]+'"] is not allowed and cut';q.sap.log.warning(w,this);b[i+1]=null;}}return b;};var p=function(t,b){if(this._renderingRules.ELEMENTS[t]){var c=q.proxy(s,this);return c(t,b);}else{var w='<'+t+'> is not allowed';q.sap.log.warning(w,this);}};a.prototype.setHtmlText=function(t){var b="";var P=q.proxy(p,this);b=q.sap._sanitizeHTML(t,{tagPolicy:P});this.setProperty("htmlText",b);};var S=function(c){if(this.hasControls()){this.removeAllAggregation("controls");}var I=q.isArray(c);if(I&&c.length>0){for(var i=0;i<c.length;i++){this.addAggregation("controls",c[i],true);}this.invalidate();}};a.prototype.setContent=function(h,c){this.setHtmlText(h);S.call(this,c);};return a;},true);
