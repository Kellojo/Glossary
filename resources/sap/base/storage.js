/*!
 * UI development toolkit for HTML5 (OpenUI5)
 * (c) Copyright 2009-2018 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.define(["./assert"],function(a){"use strict";var s=function(S){var b=!!(S.JSON&&JSON.parse&&JSON.stringify);var c="state.key_";var C=function(d,f){var t="unknown",P=f||c;P+="-";var T=P+"___sapui5TEST___",o;if(!d||typeof(d)==="string"){t=d||"session";try{o=S[t+"Storage"];}catch(e){o=null;}try{if(o){o.setItem(T,"1");o.removeItem(T);}}catch(e){o=null;}}else if(typeof(d)==="object"){t=d.getType?d.getType():"unknown";o=d;}var g=!!o;this.isSupported=function(){if(!g){return false;}if(typeof(o.isSupported)=="function"){return o.isSupported();}return true;};this.put=function(i,h){a(typeof i==="string"&&i,"sId must be a non-empty string");a(typeof h==="string"||b,"sStateToStore must be string or JSON must be supported");if(this.isSupported()&&i){try{o.setItem(P+i,b?JSON.stringify(h):h);return true;}catch(e){return false;}}else{return false;}};this.get=function(i){a(typeof i==="string"&&i,"sId must be a non-empty string");if(this.isSupported()&&i){try{var I=o.getItem(P+i);return b?JSON.parse(I):I;}catch(e){return null;}}else{return null;}};this.remove=function(i){a(typeof i==="string"&&i,"sId must be a non-empty string");if(this.isSupported()&&i){try{o.removeItem(P+i);return true;}catch(e){return false;}}else{return false;}};this.removeAll=function(I){if(this.isSupported()&&o.length&&typeof o.key==="function"){try{var l=o.length;var k=[];var h,i;var p=P+(I||"");for(i=0;i<l;i++){h=o.key(i);if(h&&h.indexOf(p)==0){k.push(h);}}for(i=0;i<k.length;i++){o.removeItem(k[i]);}return true;}catch(e){return false;}}else{return false;}};this.clear=function(){if(this.isSupported()){try{o.clear();return true;}catch(e){return false;}}else{return false;}};this.getType=function(){return t;};};var m={};var E={getInstance:function(o,i){if(!o){o=s.Type.session;}if(typeof(o)==="string"&&s.Type[o]){var k=o;if(i&&i!=c){k=o+"_"+i;}return m[k]||(m[k]=new C(o,i));}a(o instanceof Object&&o.clear&&o.setItem&&o.getItem&&o.removeItem,"storage: duck typing the storage");return new C(o,i);}};C.apply(E.getInstance);m[s.Type.session]=E.getInstance;return E;};s.Type={local:"local",session:"session",global:"global"};return s;});
