/*
 * ! UI development toolkit for HTML5 (OpenUI5)
 * (c) Copyright 2009-2018 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.define(["sap/ui/fl/Utils","sap/ui/core/Element","sap/ui/core/Component"],function(U,E,C){"use strict";var v="sap-ui-fl-control-variant-id";var a={clearVariantParameterInURL:function(V){var u=[];if(V instanceof E){var A=U.getAppComponentForControl(V);var o=A.getModel("$FlexVariants");var s=o._getLocalId(V.getId(),A);var m=o.getVariantIndexInURL(s);if(m.index>-1){m.parameters[v].splice(m.index,1);u=m.parameters[v].slice(0);}}U.setTechnicalURLParameterValues(A,v,u);},activateVariant:function(e,V){var o;return Promise.resolve().then(function(){if(typeof e==='string'||e instanceof String){o=sap.ui.getCore().getComponent(e);if(!(o instanceof C)){o=sap.ui.getCore().byId(e);if(!(o instanceof E)){throw new Error("A valid component or control cannot be found for the provided Id");}}}else if(e instanceof C||e instanceof E){o=e;}var A=U.getAppComponentForControl(o);if(!A){throw new Error("A valid variant management control or component (instance or id) should be passed as parameter");}var b=A.getModel("$FlexVariants");if(!b){throw new Error("No variant management model found for the passed control or component");}var s=b.getVariantManagementReference(V).variantManagementReference;if(!s){throw new Error("A valid control or component, and variant id combination is required");}return b.updateCurrentVariant(s,V);})["catch"](function(b){U.log.error(b);return Promise.reject(b);});}};return a;},true);
